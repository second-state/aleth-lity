# ENI Implementation for cpp-ethereum

This directory contains the ENI implementation and tests for cpp-ethereum

## Unit tests

Before running the tests, make sure that libENI is [properly setup](https://libeni.readthedocs.io/en/latest/getting-started.html#install).

Run `make test` under this directory to run the unit tests.

More ENI testcases can be added through test_eni.cpp

## Integration tests

1.  Build cpp-ethereum

    ```
    mkdir build
    cd build
    cmake ..
    make
    ```

2.  In the build directory:

    ```
    aleth-vm/aleth-vm --code $code --input $input --log-verbosity=4 --vm=interpreter
    ```

    For `$code` and `$input`, see: https://lity.readthedocs.io/en/latest/eni-tutorial.html

    Following the example there, the command would be:

    ```
    aleth-vm/aleth-vm --code 608060405260043610610041576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063064767aa14610046575b600080fd5b34801561005257600080fd5b506100ad600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610128565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100ed5780820151818401526020810190506100d2565b50505050905090810190601f16801561011a5780820d805160018360200d6101000a0d1916815260200191505b509250505060405180910390f35b60608060405160206040519081016040526001905260206040519081016040527f0400000000000000000000000000000000000000000000000000000000000000905260206040519081016040526001905260206040519081016040527f04000000000000000000000000000000000000000000000000000000000000009052602060405190810160405280600090528480516020019081601f0160209004602002604051908101604052905b6020831015156101fa57805182526020820191506020810190506020830392506101d5565b6001836020036101000a0d801982511681845116808217855250505050505080604051819003602090039052907f7265766572736500000000000000000000000000000000000000000000000000f59050809150509190505600a165627a7a723058208ce7aeccf2adc85557f879e3ac6ba2ca85fc018e77b351a8a424a32b40808d3f0029 --input 064767aa000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000054142434445000000000000000000000000000000000000000000000000000000 --log-verbosity=4 --vm=interpreter
    ```
